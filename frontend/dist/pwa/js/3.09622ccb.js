(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"3f51":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-red-10 q-mt-md q-mb-md"},[n("q-btn",{staticClass:"full-width",attrs:{to:{name:"recive",params:{amount:t.amount}},color:"orange-14",label:t.$t("Top up balance by ")+t.amount+" bip"}})],1)},r=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),s=n.n(a),c=n("2f62");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={name:"NotEnough",props:["amount"],data:function(){return{}},computed:u({},Object(c["c"])({balanceJSON:function(t){return t.api.balanceJSON}}))},m=l,p=n("2877"),h=n("eebe"),b=n.n(h),d=n("9c40"),f=Object(p["a"])(m,o,r,!1,null,null,null);e["a"]=f.exports;b()(f,"components",{QBtn:d["a"]})},ee33:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("div",{staticClass:"q-pa-md"},[n("div",{staticClass:"text-h5 text-center full-width q-mb-md q-mt-md text-indigo-10"},[t._v(t._s(t.$t("Top up phone balance")))]),n("q-form",{staticClass:"q-pb-lg"},[n("q-input",{staticClass:"q-mb-md",attrs:{type:"number",step:"any",outlined:"",clearable:"","clear-icon":"close",debounce:"250",error:t.amountIsError,"error-message":t.amountErrorMsg,label:t.$t("Amount"),hint:"Min 10 bip, max 500 bip"},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{round:"",push:"","no-caps":"",label:"Max"},on:{click:function(e){return t.maxAmountSend()}}})]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t.amountIsError&&t.amount&&t.amount<=500&&t.amount>=10?n("not-enough",{attrs:{amount:t.amountNotEnough}}):t._e(),n("q-input",{attrs:{outlined:"","bottom-slots":"",color:"tale",clearable:"","clear-icon":"close",error:t.phoneIsError,label:t.$t("Enter phone number"),mask:"+# (###) ### - ####",hint:t.$t("Example")+": +7 (900) 000 - 0000"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("q-btn",{staticClass:"q-mt-md",attrs:{color:"indigo-6",size:"1.3em"},on:{click:t.pay}},[n("q-icon",{staticClass:"q-mr-sm",attrs:{name:"system_update",size:"1.25em"}}),n("div",{staticStyle:{"font-size":"0.7em"}},[t._v(t._s(t.$t("Send"))+" "+t._s(t.amount?t.amount:0)+" Bip")])],1)],1),n("q-separator",{staticClass:"q-mb-lg"}),n("div",{staticClass:"text-grey-6"},[t._v(t._s(t.$t("Money will be sent to the entered phone in 10 seconds"))+".")])],1),n("q-dialog",{attrs:{size:"md",position:"bottom"},model:{value:t.txReady,callback:function(e){t.txReady=e},expression:"txReady"}},[n("q-card",{staticClass:"dialog-min300 text-center"},[n("q-card-section",[n("div",[n("q-icon",{attrs:{color:"secondary",name:"done",size:"5em"}})],1),n("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("Payment was successful!")))])])],1)],1)],1)},r=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("456d"),n("c47a")),s=n.n(a),c=(n("a481"),n("6b54"),n("06db"),n("2f62")),i=n("9dcd"),u=n.n(i),l=n("158a"),m=n("6ff6"),p=n("b862"),h=n("3f51");function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"ServiceBiptophone",components:{"not-enough":h["a"]},data:function(){return{phone:null,amount:null,amountNotEnough:null,amountErrorMsg:null,amountIsError:!1,phoneIsError:!1,sendFee:Object(l["e"])(m["a"].SEND,{payload:"03esf0"}),checkFee:Object(l["e"])(m["a"].REDEEM_CHECK),txReady:!1}},created:function(){null!==localStorage.getItem("phone")&&(this.phone=localStorage.getItem("phone")),console.log(this.balanceBIP.gte(10)),this.balanceBIP.gte(10)&&this.maxAmountSend()},methods:{checkBalance:function(){if(this.amountErrorMsg=null,this.amountIsError=!1,this.amountNotEnough=null,null===this.amount||""===this.amount)return this.amountIsError=!0,this.amountErrorMsg="Min 10 bip",!1;if(u()(this.amount).gte(500))return this.amountIsError=!0,this.amountErrorMsg="Max 500 bip",!1;if(u()(this.amount).lt(10))return this.amountIsError=!0,this.amountErrorMsg="Min 10 bip",!1;var t=u()(this.balanceBIP).minus(this.sendFee).minus(this.checkFee);return""!==this.amount&&(!!t.gte(this.amount)||(this.amountIsError=!0,this.amountNotEnough=u()(this.amount).minus(t).toString(),this.amountErrorMsg=this.$t("Not enough ")+this.amountNotEnough+" bip",!1))},maxAmountSend:function(){var t=u()(this.balanceBIP).minus(this.sendFee).minus(this.checkFee);this.amount=t.toString()},checkPhone:function(){if(this.phoneIsError=!1,this.phone){var t=this.phone.replace(/\D+/g,"");return!(!t||11!==t.length)||(this.phoneIsError=!0,!1)}return this.phoneIsError=!0,!1},validate:function(){return!(!this.checkBalance()||!this.checkPhone())},pay:function(){var t=this;if(this.validate()){var e=this.phone.replace(/\D+/g,""),n=u()(this.amount).minus(this.checkFee),o=(new Date).getTime()-158248e7,r=Object(p["c"])({privateKey:this.privateKey,password:"pass",nonce:o,chainId:1,coin:"BIP",value:n.toString(),dueBlock:999999999}),a={check:r,meta:{phone:e}};this.$store.commit("SET_SENDING",!0),this.$store.dispatch("REEF_API",["biptophone","pay",a]).then((function(e){t.$store.commit("SET_SENDING",!1),t.$store.dispatch("FETCH_BALANCE"),t.txReady=!0,console.log(e)})).catch((function(e){t.$store.dispatch("FETCH_BALANCE"),t.$store.commit("SET_SENDING",!1),t.$store.commit("SET_TXERROR",e)}))}}},computed:d({},Object(c["c"])({privateKey:function(t){return t.wallet.privateKey},currency:function(t){return t.api.currency},balance:function(t){return t.api.balance},balanceBIP:function(t){return t.api.balanceBIP}})),watch:{amount:function(){this.checkBalance()}}},g=f,E=n("2877"),y=n("eebe"),O=n.n(y),v=n("9989"),j=n("0378"),I=n("27f9"),P=n("9c40"),S=n("0016"),w=n("eb85"),x=n("24e8"),_=n("f09f"),q=n("a370"),k=Object(E["a"])(g,o,r,!1,null,null,null);e["default"]=k.exports;O()(k,"components",{QPage:v["a"],QForm:j["a"],QInput:I["a"],QBtn:P["a"],QIcon:S["a"],QSeparator:w["a"],QDialog:x["a"],QCard:_["a"],QCardSection:q["a"]})}}]);