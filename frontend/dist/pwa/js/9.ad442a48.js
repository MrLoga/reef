(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"17be":function(t,e,c){"use strict";c.r(e);var i=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("q-page",{attrs:{padding:""}},[t.product?c("div",{},[c("div",{staticClass:"text-h5 text-center full-width q-mb-md q-mt-md text-bold text-indigo-10"},[t._v(t._s(t.product.title))]),t.product.image_url?c("q-img",{staticStyle:{width:"100%","max-height":"250px"},attrs:{contain:"",src:"http://"+t.product.image_url,"spinner-color":"primary","spinner-size":"82px"}}):t._e(),c("div",{staticClass:"q-mt-md text-subtitle2"},[t._v(t._s(t.product.brief))]),c("q-separator",{staticClass:"q-mt-md",attrs:{color:"indigo"}}),c("div",{staticClass:"q-mt-md q-mb-lg"},[c("div",{staticClass:"text-h6 text-center full-width q-mb-md text-bold text-indigo-10"},[t._v("Buy certificate")]),c("div",{staticClass:"row justify-center"},[c("div",{staticClass:"col-sm-8 col-xs-12"},[c("div",{staticClass:"text-subtitle1 text-center text-bold text-indigo-10"},[t._v("You have "+t._s(parseFloat(t.balance.total_balance_sum))+" bip")]),c("div",{staticClass:"text-subtitle2 text-center text-grey"},[t._v("~ "+t._s(t.bipRub(t.balance.total_balance_sum))+" rub | ~ "+t._s(parseFloat(t.balance.total_balance_sum_usd))+" usd")]),c("q-input",{staticClass:"product__select q-mt-md",attrs:{type:"email",label:"Email *",clearable:"",outlined:"",hint:"A certificate will come to this mail"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),c("q-select",{staticClass:"product__select q-mt-md",attrs:{outlined:"",options:t.product.faces,label:"Choose certificate","display-value":t.selectFaces?t.selectFaces+" rub":""},scopedSlots:t._u([{key:"option",fn:function(e){return[c("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[c("q-item-section",[c("q-item-label",[c("b",[t._v(t._s(e.opt)+" rub")]),t._v("  =  "),c("span",[t._v(t._s(t.bipPrice(e.opt))+" bip")])])],1)],1)]}},{key:"after",fn:function(){return[c("q-btn",{attrs:{disabled:!t.checkBuy(),size:"md",color:"indigo",stack:"",icon:"shopping_cart",label:"Buy for "+t.bipPrice(t.selectFaces)+" bip"},on:{click:function(e){return t.buy()}}})]},proxy:!0}],null,!1,2412330731),model:{value:t.selectFaces,callback:function(e){t.selectFaces=e},expression:"selectFaces"}})],1)])]),c("q-separator",{staticClass:"q-mt-lg q-mb-md",attrs:{color:"indigo"}}),c("div",{staticClass:"text-right"},[c("q-btn",{attrs:{flat:"",label:"Disclaimer",color:"indigo-4"},on:{click:function(e){t.dialogDisclaimer=!0}}})],1),c("q-dialog",{model:{value:t.dialogDisclaimer,callback:function(e){t.dialogDisclaimer=e},expression:"dialogDisclaimer"}},[c("q-card",{staticClass:"dialog-min300"},[c("q-card-section",[c("div",{staticClass:"text-h6"},[t._v("Disclaimer")])]),c("q-card-section",[c("div",{domProps:{innerHTML:t._s(t.product.disclaimer)}})]),c("q-card-actions",{attrs:{align:"right"}},[c("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1),c("q-dialog",{model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[c("q-card",{staticClass:"dialog-min300 text-center"},[c("q-card-section",[c("div",[c("q-icon",{attrs:{color:"secondary",name:"email",size:"5em"}})],1),c("div",{staticClass:"text-h6"},[t._v("Письмо с сертификатом отправилось к вам на почту "+t._s(t.email))])]),c("q-card-actions",{attrs:{align:"right"}},[c("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1),c("br"),c("br")],1):t._e()])},a=[],s=(c("8e6e"),c("8a81"),c("ac6a"),c("cadf"),c("456d"),c("c47a")),r=c.n(s),o=(c("6b54"),c("06db"),c("2f62")),n=c("b862"),l=c("9dcd"),u=c.n(l);function d(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,i)}return c}function p(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?d(Object(c),!0).forEach((function(e){r()(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}var b={name:"Settings",data:function(){return{success:!1,email:null,selectFaces:null,dialogDisclaimer:!1,productId:null,product:null}},created:function(){this.$route.params.productId&&""!==this.$route.params.productId&&(this.productId=this.$route.params.productId,this.products&&(this.product=this.getProduct(this.productId)))},methods:{checkBuy:function(){if(this.email&&this.selectFaces&&this.selectFaces>0){var t=new u.a(this.balance.total_balance_sum).div(this.currency.biptorub);return!!t.gt(this.selectFaces)}return!1},bipRub:function(t){if(t){var e=u()(t).times(this.currency.biptorub).round(2);return e.toString()}return 0},bipPrice:function(t){if(t){var e=u()(t).div(this.currency.biptorub).round();return e.toString()}return"0"},buy:function(){var t=this;if(this.checkBuy()){var e=new u.a(this.selectFaces).div(this.currency.biptorub),c=(new Date).getTime()-158248e7,i=Object(n["c"])({privateKey:this.privateKey,passPhrase:"pass",nonce:c,chainId:1,coin:"BIP",value:e.toString(),dueBlock:999999999});this.$store.dispatch("SEND_CHECK",{check:i,product:this.productId,face:this.selectFaces,address:this.address,email:this.email}).then((function(e){t.success=!0,t.$store.dispatch("FETCH_BALANCE"),console.log(e)})).catch((function(t){console.log(t)}))}}},computed:p({},Object(o["c"])({currency:function(t){return t.api.currency},balance:function(t){return t.api.balance},products:function(t){return t.api.products},privateKey:function(t){return t.wallet.privateKey},address:function(t){return t.wallet.address}}),{},Object(o["b"])(["getProduct"])),watch:{products:function(t){t&&t.length&&this.productId&&(this.product=this.getProduct(this.productId))}}},m=b,h=c("2877"),f=c("eebe"),v=c.n(f),g=c("9989"),_=c("068f"),y=c("eb85"),q=c("27f9"),x=c("ddd8"),C=c("66e5"),w=c("4074"),O=c("0170"),P=c("9c40"),k=c("24e8"),I=c("f09f"),j=c("a370"),F=c("4b7e"),D=c("0016"),Q=c("7f67"),S=Object(h["a"])(m,i,a,!1,null,null,null);e["default"]=S.exports;v()(S,"components",{QPage:g["a"],QImg:_["a"],QSeparator:y["a"],QInput:q["a"],QSelect:x["a"],QItem:C["a"],QItemSection:w["a"],QItemLabel:O["a"],QBtn:P["a"],QDialog:k["a"],QCard:I["a"],QCardSection:j["a"],QCardActions:F["a"],QIcon:D["a"]}),v()(S,"directives",{ClosePopup:Q["a"]})}}]);